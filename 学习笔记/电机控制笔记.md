# 电机控制

### PID算法

PID (proportion integration differentiation)
      比例            积分              微分

##### 公式

out(t) = Kp * error(t) + Ki * ∫error(t)dt + Kd * derror(t)/dt		{error 误差 = 目标值 - 实际值}

##### 参数

值             		   越大            代价
Kp: 当前误差值 	        响应越快     系统超调  
Ki:  误差的累计 	 	 消除稳态     系统滞后
Kd: 误差的变化的速度   阻尼越大     系统卡顿

##### tips：

**积分项积太多**：1.变速积分  2.设定阈值

**微分项微太快**：1.用实际曲线斜率取负 2.引入均值滤波防突变

out输出中 比例的权重不断减小 不断转化为 积分的权重

有刷电机（通过机械结构控制电流转向）

无刷电机（通过半导体器件控制电流转向）

---

### FOC算法

FOC (Field Oriented Control)
<通过编程控制MOS管通断控制电流从而控制电机的算法>

##### clark变换  

将三相信号 降为 二维αβ [投影矩阵]

##### park变换

将二维αβ 转化为 二维qd  [旋转矩阵]（通过编码器测得）

##### foc算法流程

设定Iq Id(电流)  -克拉克逆变换->  Iα Iβ  -帕克逆变换->  Ia Ib Ic  -> 控制(力矩)电机

---

### 电<->磁

安培力（宏观）		洛伦兹力（微观）

电生磁       磁生电			安培定则（右手螺旋定则）
磁场 力（切割）   -> 电流			右手定则
磁场 电流 -> 力（安培力） 			左手定则